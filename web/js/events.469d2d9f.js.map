{"version":3,"sources":["webpack:///./src/views/Events.vue?6a2a","webpack:///src/views/Events.vue","webpack:///./src/views/Events.vue?e7cb","webpack:///./src/views/Events.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","loadingDbDates","loadingEvents","years","model","value","callback","$$v","yearSelected","expression","months","monthSelected","dates","dateSelected","eventList","length","_l","item","index","key","domProps","_s","getIconClass","_v","getFriendlyType","getDateString","timezoneOffset","_e","staticRenderFns","data","todayDate","currentDate","getUTCFullYear","getUTCMonth","getUTCDate","Date","getTimezoneOffset","watch","computed","eventDates","Object","keys","methods","nf","type","cssClass","friendlyType","JSON","stringify","created","component","VCard","VCol","VContainer","VIcon","VList","VListItem","VListItemAvatar","VListItemContent","VListItemSubtitle","VListItemTitle","VProgressCircular","VRow","VSelect"],"mappings":"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","file":"js/events.469d2d9f.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-row',{attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('v-col',{staticClass:\"pl-1 pr-1 pt-0\",attrs:{\"cols\":\"12\",\"md\":\"8\"}},[_c('v-card',{attrs:{\"disabled\":_vm.loadingDbDates || _vm.loadingEvents,\"loading\":_vm.loadingDbDates}},[_c('v-container',{staticClass:\"pb-0\"},[_c('v-row',[_c('v-col',{staticClass:\"pb-0\"},[_c('v-select',{attrs:{\"dense\":\"\",\"label\":\"Year\",\"items\":_vm.years},model:{value:(_vm.yearSelected),callback:function ($$v) {_vm.yearSelected=$$v},expression:\"yearSelected\"}})],1),_c('v-col',{staticClass:\"pb-0\"},[_c('v-select',{attrs:{\"dense\":\"\",\"label\":\"Month\",\"items\":_vm.months},model:{value:(_vm.monthSelected),callback:function ($$v) {_vm.monthSelected=$$v},expression:\"monthSelected\"}})],1),_c('v-col',{staticClass:\"pb-0\"},[_c('v-select',{attrs:{\"dense\":\"\",\"label\":\"Date (UTC)\",\"items\":_vm.dates},model:{value:(_vm.dateSelected),callback:function ($$v) {_vm.dateSelected=$$v},expression:\"dateSelected\"}})],1)],1)],1)],1)],1)],1),(_vm.loadingEvents)?_c('v-row',{attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('v-col',{staticClass:\"text-center\",attrs:{\"cols\":\"6\"}},[_c('v-progress-circular',{attrs:{\"size\":70,\"width\":7,\"indeterminate\":\"\"}})],1)],1):_c('v-row',{attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('v-col',{staticClass:\"pl-1 pr-1 pt-0\",attrs:{\"cols\":\"12\",\"md\":\"8\"}},[(_vm.eventList && _vm.eventList.length > 0)?_c('v-list',{attrs:{\"dense\":\"\",\"subheader\":\"\"}},_vm._l((_vm.eventList),function(item,index){return _c('v-list-item',{key:index,staticClass:\"pl-1\"},[_c('v-list-item-avatar',{staticClass:\"pa-0 mr-0\"},[_c('v-icon',{domProps:{\"textContent\":_vm._s(_vm.getIconClass(item))}})],1),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(_vm._s(index + 1)+\". \"+_vm._s(_vm.getFriendlyType(item)))]),_c('v-list-item-subtitle',[_vm._v(_vm._s(_vm.getDateString(item))+\" (GMT \"+_vm._s(-_vm.timezoneOffset >= 0 ? '+' : '-')+_vm._s(-_vm.timezoneOffset)+\")\")])],1)],1)}),1):_vm._e(),(!_vm.loadingEvents && (!_vm.eventList || _vm.eventList.length === 0))?_c('div',{staticClass:\"text-center\"},[_vm._v(\"So quiet here...\")]):_vm._e()],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container fluid>\n    <v-row align=\"center\" justify=\"center\">\n      <v-col class=\"pl-1 pr-1 pt-0\" cols=\"12\" md=\"8\">\n        <v-card :disabled=\"loadingDbDates || loadingEvents\" :loading=\"loadingDbDates\">\n          <v-container class=\"pb-0\">\n            <v-row>\n              <v-col class=\"pb-0\">\n                <v-select dense label=\"Year\" :items=\"years\" v-model=\"yearSelected\" />\n              </v-col>\n              <v-col class=\"pb-0\">\n                <v-select dense label=\"Month\" :items=\"months\" v-model=\"monthSelected\" />\n              </v-col>\n              <v-col class=\"pb-0\">\n                <v-select dense label=\"Date (UTC)\" :items=\"dates\" v-model=\"dateSelected\" />\n              </v-col>\n            </v-row>\n          </v-container>\n        </v-card>\n      </v-col>\n    </v-row>\n    <v-row v-if=\"loadingEvents\" align=\"center\" justify=\"center\">\n      <v-col cols=\"6\" class=\"text-center\">\n        <v-progress-circular :size=\"70\" :width=\"7\" indeterminate />\n      </v-col>\n    </v-row>\n    <v-row v-else align=\"center\" justify=\"center\">\n      <v-col class=\"pl-1 pr-1 pt-0\" cols=\"12\" md=\"8\">\n        <v-list dense v-if=\"eventList && eventList.length > 0\" subheader>\n          <v-list-item class=\"pl-1\" v-for=\"(item, index) in eventList\" :key=\"index\">\n            <v-list-item-avatar class=\"pa-0 mr-0\">\n              <v-icon v-text=\"getIconClass(item)\"></v-icon>\n            </v-list-item-avatar>\n            <v-list-item-content>\n              <v-list-item-title>{{ index + 1 }}. {{ getFriendlyType(item) }}</v-list-item-title>\n              <v-list-item-subtitle>{{ getDateString(item) }} (GMT {{ -timezoneOffset >= 0 ? '+' : '-' }}{{ -timezoneOffset }})</v-list-item-subtitle>\n            </v-list-item-content>\n          </v-list-item>\n        </v-list>\n        <div\n          class=\"text-center\"\n          v-if=\"!loadingEvents && (!eventList || eventList.length === 0)\"\n        >So quiet here...</div>\n      </v-col>\n    </v-row>\n  </v-container>\n</template>\n\n<script>\nimport { mapState, mapActions, mapMutations } from 'vuex'\nimport { nf } from '../utilities/helpers'\n\nexport default {\n  data: () => {\n    const currentDate = new Date()\n    return {\n      todayDate: currentDate,\n      yearSelected: currentDate.getUTCFullYear(),\n      monthSelected: currentDate.getUTCMonth() + 1,\n      dateSelected: currentDate.getUTCDate(),\n      timezoneOffset: new Date().getTimezoneOffset() / 60,\n      loadingEvents: true,\n      loadingDbDates: true,\n    }\n  },\n  watch: {\n    dateSelected: async function() {\n      await this.getEvents(this.yearSelected, this.monthSelected, this.dateSelected)\n    },\n  },\n  computed: {\n    ...mapState(['eventList', 'eventDates']),\n    years() {\n      if (!this.eventDates || Object.keys(this.eventDates).length === 0)\n        return [{ text: this.yearSelected, value: this.yearSelected }]\n      else\n        return Object.keys(this.eventDates).map(key => {\n          return { text: key, value: parseInt(key) }\n        })\n    },\n    months() {\n      if (!this.eventDates[this.yearSelected]) return [{ text: nf(this.monthSelected), value: this.monthSelected }]\n      else\n        return Object.keys(this.eventDates[this.yearSelected]).map(key => {\n          return { text: nf(key), value: parseInt(key) }\n        })\n    },\n    dates() {\n      if (!this.eventDates[this.yearSelected] || !this.eventDates[this.yearSelected][this.monthSelected])\n        return [{ text: nf(this.dateSelected), value: this.dateSelected }]\n      else\n        return Object.keys(this.eventDates[this.yearSelected][this.monthSelected]).map(key => {\n          return {\n            text: `${nf(key)} (${this.eventDates[this.yearSelected][this.monthSelected][key]} events)`,\n            value: parseInt(key),\n          }\n        })\n    },\n  },\n  methods: {\n    nf,\n    ...mapMutations(['setEvents', 'setTitle']),\n    ...mapActions(['showSnackbar']),\n    getIconClass(item) {\n      let cssClass\n      switch (item.type) {\n        case 'feeding':\n          cssClass = 'mdi-food'\n          break\n        case 'clocksync':\n          cssClass = 'mdi-clock'\n          break\n        case 'warning':\n          cssClass = 'mdi-alert'\n          break\n      }\n\n      return cssClass\n    },\n    getFriendlyType(item) {\n      let friendlyType = item.type\n      switch (item.type) {\n        case 'feeding':\n          friendlyType = `Feeding. Issued portions: ${item.data.issuedPortions}, ${\n            item.data.scheduled ? 'Auto' : 'Manual'\n          }${item.data.issuedPortions < item.data.scheduledPortions ? '. Motor stuck!' : ''}`\n          break\n        case 'clocksync':\n          friendlyType = 'Clock synchronization'\n          break\n        case 'warning':\n          switch (item.data.type) {\n            case 'nofood':\n              friendlyType = 'Warning. No food left!'\n              break\n            default:\n              friendlyType = JSON.stringify(item)\n              break\n          }\n          break\n        default:\n          friendlyType = JSON.stringify(item)\n          break\n      }\n\n      return friendlyType\n    },\n    getDateString(item) {\n      const date = new Date(item.id)\n      return `${date.getFullYear()}.${nf(date.getMonth() + 1)}.${nf(date.getDate())} ${nf(date.getHours())}:${nf(\n        date.getMinutes()\n      )}:${nf(date.getSeconds())}`\n    },\n    async getEvents(year, month, date) {\n      this.loadingEvents = true\n\n      try {\n        this.$store.commit('setEvents', [])\n        await this.$store.dispatch('getEvents', { year, month, date })\n      } catch (err) {\n        console.error('getEvents error:', err)\n        this.$store.dispatch('showSnackbar', {\n          text: err,\n          timeout: 10000,\n        })\n      }\n\n      this.loadingEvents = false\n    },\n    async getEventDates() {\n      this.loadingDbDates = true\n\n      try {\n        await this.$store.dispatch('getEventDates')\n      } catch (err) {\n        console.error('getEventDates error:', err)\n        this.$store.dispatch('showSnackbar', {\n          text: err,\n          timeout: 10000,\n        })\n      }\n\n      this.loadingDbDates = false\n    },\n  },\n  created: async function() {\n    this.setTitle('Events')\n    this.getEvents(this.yearSelected, this.monthSelected, this.dateSelected)\n    this.getEventDates()\n  },\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Events.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Events.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Events.vue?vue&type=template&id=723e4036&\"\nimport script from \"./Events.vue?vue&type=script&lang=js&\"\nexport * from \"./Events.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAvatar } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemSubtitle } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\ninstallComponents(component, {VCard,VCol,VContainer,VIcon,VList,VListItem,VListItemAvatar,VListItemContent,VListItemSubtitle,VListItemTitle,VProgressCircular,VRow,VSelect})\n"],"sourceRoot":""}