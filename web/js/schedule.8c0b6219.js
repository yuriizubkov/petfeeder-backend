(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["schedule"],{"6b7b":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:""}},[e.loading?r("v-row",{attrs:{align:"center",justify:"center"}},[r("v-col",{staticClass:"text-center",attrs:{cols:"6"}},[r("v-progress-circular",{attrs:{size:70,width:7,indeterminate:""}})],1)],1):r("v-row",{attrs:{align:"center",justify:"center"}},[r("v-col",{staticClass:"pl-1 pr-1 pt-0",attrs:{cols:"12",md:"8"}},e._l(e.schedule,(function(e){return r("ScheduleEntry",{key:e.entryIndex,attrs:{scheduleEntry:e}})})),1)],1)],1)},n=[],i=(r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("d3b7"),r("159b"),r("96cf"),r("2fa7")),o=r("2f62"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"mb-4",attrs:{disabled:!e.connected,loading:e.loading}},[r("v-card-title",[e._v(e._s(e._f("formatHours")(e.scheduleEntry.hours))+":"+e._s(e._f("formatNumber")(e.scheduleEntry.minutes)))]),r("v-card-subtitle",[e._v("Local time (GMT "+e._s(-e.timezoneOffset>=0?"+":"-")+e._s(-e.timezoneOffset)+")")]),r("v-card-text",{staticClass:"pb-0 pt-0"},[r("v-container",{staticClass:"pa-0"},[r("v-row",[r("v-col",[r("v-select",{attrs:{label:"Portions (1 = 10 gram)",error:""!==e.portionsErrorMessage,"error-messages":e.portionsErrorMessage,items:e.portions},model:{value:e.scheduleEntry.portions,callback:function(t){e.$set(e.scheduleEntry,"portions",t)},expression:"scheduleEntry.portions"}})],1),r("v-col",[r("v-switch",{attrs:{label:e.scheduleEntry.enabled?"Enabled":"Disabled",error:""!==e.enabledErrorMessage,"error-messages":e.enabledErrorMessage},model:{value:e.scheduleEntry.enabled,callback:function(t){e.$set(e.scheduleEntry,"enabled",t)},expression:"scheduleEntry.enabled"}})],1)],1),r("v-row",[r("v-col",[r("v-select",{attrs:{label:"Hour (UTC)",error:""!==e.hoursErrorMessage,"error-messages":e.hoursErrorMessage,items:e.hours},model:{value:e.scheduleEntry.hours,callback:function(t){e.$set(e.scheduleEntry,"hours",t)},expression:"scheduleEntry.hours"}})],1),r("v-col",[r("v-select",{attrs:{label:"Minutes",error:""!==e.minutesErrorMessage,"error-messages":e.minutesErrorMessage,items:e.minutes},model:{value:e.scheduleEntry.minutes,callback:function(t){e.$set(e.scheduleEntry,"minutes",t)},expression:"scheduleEntry.minutes"}})],1)],1)],1)],1)],1)},c=[],l=(r("a630"),r("d81d"),r("0d03"),r("3ca3"),r("ddb0"),r("6b27"));function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(r,!0).forEach((function(t){Object(i["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d={props:{scheduleEntry:Object},data:function(){return{loading:!1,timezoneOffset:(new Date).getTimezoneOffset()/60,hours:Array.from(Array(24).keys()).map((function(e){return{text:Object(l["a"])(e),value:e}})),minutes:Array.from(Array(60).keys()).map((function(e){return{text:Object(l["a"])(e),value:e}})),portions:Array.from(Array(10).keys()).map((function(e){return{text:e+1,value:e+1}})),minutesErrorMessage:"",hoursErrorMessage:"",portionsErrorMessage:"",enabledErrorMessage:"",updatingFromWatcher:!1}},computed:Object(o["d"])(["connected"]),watch:{"scheduleEntry.portions":{handler:function(e,t){this.updateChanges("portions",e,t)}},"scheduleEntry.enabled":{handler:function(e,t){this.updateChanges("enabled",e,t)}},"scheduleEntry.minutes":{handler:function(e,t){this.updateChanges("minutes",e,t)}},"scheduleEntry.hours":{handler:function(e,t){this.updateChanges("hours",e,t)}}},methods:h({},Object(o["b"])(["showSnackbar"]),{addPortion:function(){this.scheduleEntry.portions<10&&this.scheduleEntry.portions++},removePortion:function(){this.scheduleEntry.portions>1&&this.scheduleEntry.portions--},addHour:function(){this.scheduleEntry.hours<23?this.scheduleEntry.hours++:this.scheduleEntry.hours=0},removeHour:function(){this.scheduleEntry.hours>=1?this.scheduleEntry.hours--:this.scheduleEntry.hours=23},updateChanges:function(e,t,r){var s=this;this.updatingFromWatcher?this.updatingFromWatcher=!1:(this.loading=!0,this.$store.dispatch("setScheduleEntry",this.scheduleEntry).then((function(){s["".concat(e,"ErrorMessage")]=""})).catch((function(t){s.updatingFromWatcher=!0,s.scheduleEntry[e]=r,s["".concat(e,"ErrorMessage")]=t,console.error("setScheduleEntry error:",t),s.$store.dispatch("showSnackbar",{text:t,timeout:1e4})})).then((function(){s.loading=!1})))}}),filters:{formatNumber:l["a"],formatHours:function(e){var t=(new Date).getTimezoneOffset()/60,r=e-t;return r=24===r?0:r,Object(l["a"])(r)}}},p=d,f=r("2877"),b=r("6544"),g=r.n(b),v=r("b0af"),m=r("99d9"),y=r("62ad"),E=r("a523"),O=r("0fd9"),w=r("b974"),C=(r("0481"),r("4069"),r("ec29"),r("9d01"),r("45fc"),r("25f0"),r("c37a")),j=r("5607"),S=r("2b0e"),V=S["a"].extend({name:"rippleable",directives:{ripple:j["a"]},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.ripple?(e.staticClass="v-input--selection-controls__ripple",e.directives=e.directives||[],e.directives.push({name:"ripple",value:{center:!0}}),e.on=Object.assign({click:this.onChange},this.$listeners),this.$createElement("div",e)):null},onChange:function(){}}}),P=r("8547"),k=r("58df"),D=Object(k["a"])(C["a"],V,P["a"]).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data:function(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor:function(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"accent"},isMultiple:function(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive:function(){var e=this,t=this.value,r=this.internalValue;return this.isMultiple?!!Array.isArray(r)&&r.some((function(r){return e.valueComparator(r,t)})):void 0===this.trueValue||void 0===this.falseValue?t?this.valueComparator(t,r):Boolean(r):this.valueComparator(r,this.trueValue)},isDirty:function(){return this.isActive}},watch:{inputValue:function(e){this.lazyValue=e,this.hasColor=e}},methods:{genLabel:function(){var e=this,t=C["a"].options.methods.genLabel.call(this);return t?(t.data.on={click:function(t){t.preventDefault(),e.onChange()}},t):t},genInput:function(e,t){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:e,type:e},t),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown},ref:"input"})},onBlur:function(){this.isFocused=!1},onChange:function(){var e=this;if(!this.isDisabled){var t=this.value,r=this.internalValue;if(this.isMultiple){Array.isArray(r)||(r=[]);var s=r.length;r=r.filter((function(r){return!e.valueComparator(r,t)})),r.length===s&&r.push(t)}else r=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(r,this.trueValue)?this.falseValue:this.trueValue:t?this.valueComparator(r,t)?null:t:!r;this.validate(!0,r),this.internalValue=r,this.hasColor=r}},onFocus:function(){this.isFocused=!0},onKeydown:function(e){}}}),x=r("c3f0"),A=r("0789"),$=r("490a"),_=r("80d2");function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(r,!0).forEach((function(t){Object(i["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var z=D.extend({name:"v-switch",directives:{Touch:x["a"]},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes:function(){return T({},C["a"].options.computed.classes.call(this),{"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset})},attrs:function(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.disabled),role:"switch"}},validationState:function(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData:function(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot:function(){return[this.genSwitch(),this.genLabel()]},genSwitch:function(){return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",T({},this.attrs,{},this.attrs$)),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",T({staticClass:"v-input--switch__track"},this.switchData)),this.$createElement("div",T({staticClass:"v-input--switch__thumb"},this.switchData),[this.genProgress()])])},genProgress:function(){return this.$createElement(A["c"],{},[!1===this.loading?null:this.$slots.progress||this.$createElement($["a"],{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft:function(){this.isActive&&this.onChange()},onSwipeRight:function(){this.isActive||this.onChange()},onKeydown:function(e){(e.keyCode===_["s"].left&&this.isActive||e.keyCode===_["s"].right&&!this.isActive)&&this.onChange()}}}),B=Object(f["a"])(p,a,c,!1,null,null,null),F=B.exports;function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(r,!0).forEach((function(t){Object(i["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}g()(B,{VCard:v["a"],VCardSubtitle:m["b"],VCardText:m["c"],VCardTitle:m["d"],VCol:y["a"],VContainer:E["a"],VRow:O["a"],VSelect:w["a"],VSwitch:z});var H={data:function(){return{loading:!0}},components:{ScheduleEntry:F},computed:Object(o["d"])(["schedule","loadingSchedule","setSchedule"]),methods:L({},Object(o["c"])(["setTitle"]),{},Object(o["b"])(["showSnackbar"]),{getSchedule:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.$store.commit("setSchedule",[]),e.next=4,regeneratorRuntime.awrap(this.$store.dispatch("getSchedule"));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e["catch"](0),console.error("getSchedule error:",e.t0),this.$store.dispatch("showSnackbar",{text:e.t0,timeout:1e4});case 10:this.loading=!1;case 11:case"end":return e.stop()}}),null,this,[[0,6]])}}),created:function(){this.setTitle("Schedule"),this.getSchedule()}},I=H,W=Object(f["a"])(I,s,n,!1,null,null,null);t["default"]=W.exports;g()(W,{VCol:y["a"],VContainer:E["a"],VProgressCircular:$["a"],VRow:O["a"]})},"9d01":function(e,t,r){},ec29:function(e,t,r){}}]);
//# sourceMappingURL=schedule.8c0b6219.js.map